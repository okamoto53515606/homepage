# Firebase Studio 開発環境のワークフローと知識

このドキュメントは、AI開発パートナー（App Prototyper）がこの開発環境の特性を理解し、ユーザーと円滑に連携するための知識をまとめたものです。

## 1. ターミナルとコマンド実行

### 利用可能なコマンドラインツール

この環境のターミナルでは、以下の主要なコマンドが利用可能です。

- `git` : バージョン管理
- `gcloud` : Google Cloudリソースの操作
- `firebase` : Firebaseプロジェクトの操作

### コマンドの実行方法

ユーザーとの対話において、AIは実行すべきコマンドを提示します。

- **` ```bash ` マークダウン**: この形式でコマンドを提示すると、ユーザーインターフェース上に実行ボタン（▶）が表示されます。ユーザーはこのボタンを押すだけでコマンドを実行できます。
- **AIは直接実行できない**: AI自身はコマンドを直接実行する権限を持ちません。ユーザーが実行し、その結果をAIに伝えることで、次のステップに進むという協調的なワークフローが基本となります。

## 2. デプロイとURL

### デプロイフロー

- **本番環境への反映**: 開発したアプリケーションは、UI右上の「Publish」ボタンを押すことで、Firebase App Hostingにデプロイされ、本番環境に反映されます。

### 環境URL

- **AIはURLを知らない**: AIは、開発用のプレビューURLや本番URLを初期状態では認識していません。
- **ユーザーからの情報提供が必要**: ユーザーが `firebase apphosting:backends:list` などのコマンドを実行し、その結果から判明したURLをAIに教えることで、AIはその情報をコンテキストとして記憶し、後の開発（CORS設定など）に活かすことができます。
- **今回確認したURLの例**:
    - **プレビューURL**: `https://9000-firebase-studio-*.cloudworkstations.dev/`
    - **本番URL**: `firebase apphosting:backends:list` コマンドで確認したURL

## 3. インフラ設定のワークフロー事例

コードだけでなく、FirebaseやGoogle Cloudのインフラ設定もAIと連携して行うことが可能です。

1.  **ユーザーが目的を指示**: （例：「サービスアカウントの秘密鍵を安全に環境変数に設定したい」）
2.  **AIがコマンドを立案・提示**:
    - `gcloud iam service-accounts list` でアカウントを確認。
    - `gcloud iam service-accounts keys create - ...` で鍵をファイルに保存せず標準出力。
3.  **ユーザーがコマンドを実行**: 提示されたコマンドを実行し、必要に応じて結果をAIにフィードバックする。
4.  **連携による継続的な操作**: AIはフィードバックを元に、次のステップのコマンドを提示する。

このワークフローにより、コマンドに不慣れなユーザーでも、AIの支援を受けながら安全かつ正確にインフラ設定を進めることができます。

## 4. バージョン管理(Git)のワークフロー事例

### 自動コミットの仕組み

AIがファイルの変更を提案し、それが適用されると、その変更は自動的にGitにコミットされます。その際、コミットメッセージにはAIへの**指示内容（ユーザーのプロンプト）**が使用されます。

### 特定のコミットに戻す操作

AIとの対話を通じて、プロジェクトを過去の特定の状態に戻すことも可能です。

1.  **AIが履歴確認コマンドを提示**: AIが `git log --oneline` などのコマンドを提示します。
2.  **ユーザーがコマンドを実行し、結果を共有**: ユーザーがコマンドを実行し、表示されたコミット履歴をAIに伝えます。
3.  **ユーザーが戻りたいコミットを指定**: ユーザーは履歴の中から戻りたいコミットを特定します。
4.  **AIがロールバック用のコマンドを提示**: AIは `git reset --hard <コミットID>` のような、指定された状態に戻るためのコマンドを提示します。
5.  **ユーザーがコマンドを実行**: ユーザーがそのコマンドを実行することで、プロジェクトのファイルが過去のバージョンに戻ります。
